{"swagger":"2.0","info":{"description":"Сервис для работы с библиотекой","version":"1.0.0","title":"My Library REST API","termsOfService":"Условия обслуживания","contact":{"name":"Дарин Сергей","url":"https://securetoken.google.com","email":"www.swd86@mail.com"},"license":{"name":"Лицензия API","url":"www.my-license-url.com"}},"host":"localhost:8080","basePath":"/","tags":[{"name":"Api сервиса Аутентификации","description":"Сервис предназначен для регистрации читателей"},{"name":"Api сервиса библиотеки","description":"Сервис предназначен для: \n- редактирования и удаления данных о читателях; \n- регистрации новых книг, редактировании и удалении данных об устаревших книгах;  \n- назначения книг читателям и освобождения книг."}],"paths":{"/auth/login":{"post":{"tags":["Api сервиса Аутентификации"],"summary":"Вход в систему","description":"Необходимо ввести корректные данные (логин, пароль)","operationId":"performLoginUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"authenticationDTO","description":"authenticationDTO","required":true,"schema":{"$ref":"#/definitions/AuthenticationDTO"}}],"responses":{"200":{"description":"Метод успешно выполнен.","schema":{"type":"object","additionalProperties":{"type":"string"}}}},"security":[{"JWT":["global"]}]}},"/auth/registration":{"post":{"tags":["Api сервиса Аутентификации"],"summary":"Регистрация нового пользователя","description":"Логин и ФИО пользователя должны быть уникальны","operationId":"performRegistrationUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"personDTO","description":"personDTO","required":true,"schema":{"$ref":"#/definitions/PersonDTO"}}],"responses":{"200":{"description":"Метод успешно выполнен.","schema":{"$ref":"#/definitions/ResponseEntity"}},"400":{"description":"Incorrect Credentials"}},"security":[{"JWT":["global"]}]}},"/auth/showUserInfo":{"get":{"tags":["Api сервиса Аутентификации"],"summary":"Данные о пользователе","description":"Отправка запроса для получения данных о пользователе (получаем логин)","operationId":"showUserInfoUsingGET","produces":["*/*"],"responses":{"200":{"description":"Метод успешно выполнен.","schema":{"type":"string"}},"405":{"description":"Method not allowed"}},"security":[{"JWT":["global"]}]}},"/library/admin":{"get":{"tags":["Api сервиса библиотеки"],"summary":"Вход на страницу админа","description":"Необходимо иметь роль \"ROLE_ADMIN\"","operationId":"adminPageUsingGET","produces":["*/*"],"responses":{"200":{"description":"Метод успешно выполнен.","schema":{"type":"string"}},"403":{"description":"Forbidden"}},"security":[{"JWT":["global"]}]}},"/library/books":{"get":{"tags":["Api сервиса библиотеки"],"summary":"Список всех книг","description":"Отправка запроса на получение всех книг в библиотеке: \n - с возможностью сортировки по году издания;\n - с возможностью выбора номера страницы;\n - с возможностью выбора количества книг на странице.","operationId":"booksUsingGET","produces":["*/*"],"parameters":[{"name":"isSortedByYear","in":"query","description":"Возможность сортировки книг по году издания","required":false,"type":"boolean","x-example":true},{"name":"limitOfBooks","in":"query","description":"Количество книг на странице","required":false,"type":"integer","format":"int32","x-example":7},{"name":"page","in":"query","description":"Номер выводимой страницы","required":false,"type":"integer","format":"int32","x-example":1}],"responses":{"200":{"description":"Метод успешно выполнен.","schema":{"$ref":"#/definitions/BookResponse"}},"403":{"description":"Авторизация не пройдена. Для использования метода необходимо авторизоваться."}},"security":[{"JWT":["global"]}]}},"/library/books/search":{"get":{"tags":["Api сервиса библиотеки"],"summary":"Поиск книги по ее названию","description":"Необходимо ввести часть заголовка книги или заголовок полностью.","operationId":"searchUsingGET","produces":["*/*"],"parameters":[{"name":"searchBook","in":"query","description":"Заголовок книги","required":false,"type":"string","x-example":"Фараон"}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/ResponseEntity"}},"404":{"description":"Не найдено соответствий по заголовку/Введите поисковый запрос"}},"security":[{"JWT":["global"]}]}},"/library/books/{bookId}/{personId}/assignPerson":{"patch":{"tags":["Api сервиса библиотеки"],"summary":"Закрепить книгу за читателем","description":"Необходимо отправить корректные идентификаторы книги и читателя.","operationId":"assignPersonUsingPATCH","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"bookId","in":"path","description":"Идентификатор книги","required":true,"type":"integer","format":"int32","x-example":1},{"name":"personId","in":"path","description":"Идентификатор читателя","required":true,"type":"integer","format":"int32","x-example":2}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/ResponseEntity"}},"404":{"description":"Not found - Книги с таким id не найдено/ Читателя с таким id не найдено"}},"security":[{"JWT":["global"]}]}},"/library/books/{id}":{"get":{"tags":["Api сервиса библиотеки"],"summary":"Получение книги по ее идентификационному номеру","description":"Необходимо отправить корректный идентификатор книги.","operationId":"showBookUsingGET","produces":["*/*"],"parameters":[{"name":"id","in":"path","description":"Идентификатор книги для запроса на её получение","required":true,"type":"integer","format":"int32","x-example":1}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/BookDTO"}},"404":{"description":"Not found - Книги с таким id не найдено"}},"security":[{"JWT":["global"]}]},"delete":{"tags":["Api сервиса библиотеки"],"summary":"Удаление книги","description":"Необходимо отправить корректный идентификатор книги.","operationId":"deleteBookUsingDELETE","produces":["*/*"],"parameters":[{"name":"id","in":"path","description":"Идентификатор книги","required":true,"type":"integer","format":"int32","x-example":3}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/ResponseEntity"}},"404":{"description":"Not found - Книги с таким id не найдено"}},"security":[{"JWT":["global"]}]},"patch":{"tags":["Api сервиса библиотеки"],"summary":"Редактирование данных книги","description":"Необходимо отправить корректный идентификатор книги.","operationId":"updateBookUsingPATCH","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"bookDTO","description":"bookDTO","required":true,"schema":{"$ref":"#/definitions/BookDTO"}},{"name":"id","in":"path","description":"Идентификатор книги","required":true,"type":"integer","format":"int32","x-example":3}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/ResponseEntity"}},"404":{"description":"Not found - Книги с таким id не найдено"}},"security":[{"JWT":["global"]}]}},"/library/books/{id}/makeFree":{"patch":{"tags":["Api сервиса библиотеки"],"summary":"Освободить книгу","description":"Необходимо отправить корректный идентификатор книги.","operationId":"makeBookFreeUsingPATCH","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"id","in":"path","description":"Идентификатор книги","required":true,"type":"integer","format":"int32","x-example":3}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/ResponseEntity"}},"404":{"description":"Not found - Книги с таким id не найдено"}},"security":[{"JWT":["global"]}]}},"/library/newBook":{"post":{"tags":["Api сервиса библиотеки"],"summary":"Добавление новой книги","description":"Необходимо ввести корректные данне новой книги, которые соответствуют параметрам.\n Смотри ограничения во вкладке \"Model\"","operationId":"newBookUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"bookDTO","description":"bookDTO","required":true,"schema":{"$ref":"#/definitions/BookDTO"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/ResponseEntity"}}},"security":[{"JWT":["global"]}]}},"/library/people":{"get":{"tags":["Api сервиса библиотеки"],"summary":"Список всех читателей","description":"Отправка запроса на получение всех читателей","operationId":"peopleUsingGET","produces":["*/*"],"responses":{"200":{"description":"Метод успешно выполнен.","schema":{"$ref":"#/definitions/PersonResponse"}},"403":{"description":"Авторизация не пройдена. Для использования метода необходимо авторизоваться."}},"security":[{"JWT":["global"]}]}},"/library/people/{id}":{"get":{"tags":["Api сервиса библиотеки"],"summary":"Получение читателя по его идентификационному номеру","description":"Необходимо отправить корректный идентификатор читателя.","operationId":"showUsingGET","produces":["*/*"],"parameters":[{"name":"id","in":"path","description":"id","required":true,"type":"integer","format":"int32"}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/ResponseEntity"}},"404":{"description":"Not found - Читателя с таким id не найдено"}},"security":[{"JWT":["global"]}]},"delete":{"tags":["Api сервиса библиотеки"],"summary":"Удаление читателя","description":"Необходимо отправить корректный идентификатор читателя.","operationId":"deletePersonUsingDELETE","produces":["*/*"],"parameters":[{"name":"id","in":"path","description":"Идентификатор читателя","required":true,"type":"integer","format":"int32","x-example":3}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/ResponseEntity"}},"404":{"description":"Not found - Читателя с таким id не найдено"}},"security":[{"JWT":["global"]}]},"patch":{"tags":["Api сервиса библиотеки"],"summary":"Редактирование данных читателя","description":"Необходимо отправить корректный идентификатор читателя.","operationId":"updatePersonUsingPATCH","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"id","in":"path","description":"id","required":true,"type":"integer","format":"int32"},{"in":"body","name":"personDTO","description":"personDTO","required":true,"schema":{"$ref":"#/definitions/PersonDTO"}}],"responses":{"200":{"description":"Successfully retrieved","schema":{"$ref":"#/definitions/ResponseEntity"}},"404":{"description":"Not found - Читателя с таким id не найдено"}},"security":[{"JWT":["global"]}]}},"/library/sortedByYear":{"get":{"tags":["Api сервиса библиотеки"],"summary":"Вывод отсортированного списка страниц. \n(Использовал отдельную кнопку при работе с Thymeleaf)","operationId":"sortedBooksByYearUsingGET","produces":["*/*"],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/BookResponse"}}},"security":[{"JWT":["global"]}]}}},"securityDefinitions":{"JWT":{"type":"apiKey","name":"Authorization","in":"header"}},"definitions":{"AuthenticationDTO":{"type":"object","required":["login","password"],"properties":{"login":{"type":"string","example":"user123","description":"Логин пользователя"},"password":{"type":"string","example":"11s345d78!","description":"Пароль пользователя"}},"title":"AuthenticationDTO","description":"DTO для аутентификации пользователей"},"BookDTO":{"type":"object","required":["author","title","yearOfRealise"],"properties":{"author":{"type":"string","example":"Марк Твен","description":"Автор книги","minLength":5,"maxLength":50,"pattern":"[А-ЯЁ][а-яё]+ [А-ЯЁ][а-яё]+"},"person":{"$ref":"#/definitions/PersonDTO"},"title":{"type":"string","example":"Том Сойер","description":"Заголовок книги","minLength":1,"maxLength":100,"pattern":"[А-ЯЁ].+"},"yearOfRealise":{"type":"integer","format":"int32","example":1990,"description":"Год издания книги","minimum":1700,"exclusiveMinimum":false}},"title":"BookDTO","description":"DTO для сущности \"Book\""},"BookResponse":{"type":"object","properties":{"bookDTOList":{"type":"array","items":{"$ref":"#/definitions/BookDTO"}}},"title":"BookResponse","description":"Объект, который возвращает список \"BookDTO\""},"PersonDTO":{"type":"object","required":["fullName","login","password","yearOfBirthday"],"properties":{"fullName":{"type":"string","example":"Дарин Сергей Владимирович","description":"ФИО пользователя","minLength":8,"maxLength":100,"pattern":"[А-ЯЁ][а-яё]+ [А-ЯЁ][а-яё]+ [А-ЯЁ][а-яё]+"},"login":{"type":"string","example":"user123","description":"Логин пользователя"},"password":{"type":"string","example":"11s345d78!","description":"Пароль пользователя"},"yearOfBirthday":{"type":"integer","format":"int32","example":1986,"description":"Год рождения","minimum":1900,"exclusiveMinimum":false}},"title":"PersonDTO","description":"DTO для сущности \"Person\""},"PersonResponse":{"type":"object","properties":{"personDTOList":{"type":"array","items":{"$ref":"#/definitions/PersonDTO"}}},"title":"PersonResponse","description":"Объект, который возвращает список \"PersonDTO\""},"ResponseEntity":{"type":"object","properties":{"body":{"type":"object"},"statusCode":{"type":"string","enum":["ACCEPTED","ALREADY_REPORTED","BAD_GATEWAY","BAD_REQUEST","BANDWIDTH_LIMIT_EXCEEDED","CHECKPOINT","CONFLICT","CONTINUE","CREATED","DESTINATION_LOCKED","EXPECTATION_FAILED","FAILED_DEPENDENCY","FORBIDDEN","FOUND","GATEWAY_TIMEOUT","GONE","HTTP_VERSION_NOT_SUPPORTED","IM_USED","INSUFFICIENT_SPACE_ON_RESOURCE","INSUFFICIENT_STORAGE","INTERNAL_SERVER_ERROR","I_AM_A_TEAPOT","LENGTH_REQUIRED","LOCKED","LOOP_DETECTED","METHOD_FAILURE","METHOD_NOT_ALLOWED","MOVED_PERMANENTLY","MOVED_TEMPORARILY","MULTIPLE_CHOICES","MULTI_STATUS","NETWORK_AUTHENTICATION_REQUIRED","NON_AUTHORITATIVE_INFORMATION","NOT_ACCEPTABLE","NOT_EXTENDED","NOT_FOUND","NOT_IMPLEMENTED","NOT_MODIFIED","NO_CONTENT","OK","PARTIAL_CONTENT","PAYLOAD_TOO_LARGE","PAYMENT_REQUIRED","PERMANENT_REDIRECT","PRECONDITION_FAILED","PRECONDITION_REQUIRED","PROCESSING","PROXY_AUTHENTICATION_REQUIRED","REQUESTED_RANGE_NOT_SATISFIABLE","REQUEST_ENTITY_TOO_LARGE","REQUEST_HEADER_FIELDS_TOO_LARGE","REQUEST_TIMEOUT","REQUEST_URI_TOO_LONG","RESET_CONTENT","SEE_OTHER","SERVICE_UNAVAILABLE","SWITCHING_PROTOCOLS","TEMPORARY_REDIRECT","TOO_EARLY","TOO_MANY_REQUESTS","UNAUTHORIZED","UNAVAILABLE_FOR_LEGAL_REASONS","UNPROCESSABLE_ENTITY","UNSUPPORTED_MEDIA_TYPE","UPGRADE_REQUIRED","URI_TOO_LONG","USE_PROXY","VARIANT_ALSO_NEGOTIATES"]},"statusCodeValue":{"type":"integer","format":"int32"}},"title":"ResponseEntity"}}}